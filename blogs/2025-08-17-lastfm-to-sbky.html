<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Using chatGPT to create simple code | Lieba Natur Brilian Web and Funsite </title>
        <link rel="stylesheet" href="../css/water.css">
    </head>
</html>

<body>
    <header>
        <nav>
            <a href="../index.html">Home</a>
            <a href="../about.html">About Me</a>
            <a href="../blogs.html">Blogs</a>
            <a href="../resume.html">Resume</a>
            <a href="../navigation.html">Navigation</a>
        </nav>

        <h1>
            Using chatGPT to create simple code
        </h1>
        <p><em>View this article in: EN | <a href="../id/blogs/2025-08-17-lastfm-to-bsky.html">ID</a> | <a href="../jp/blogs/2025-10-28-post-pertama.html">JP</a></em></p>
    </header>
    
    <main>
        <figure>
            <img src="/blogs/assets/aimp4-and-cmd-show.png">
        </figure>
        <p>
            Yesterday, I remembered that I had a Bluesky account that I planned to use to post songs on Last.fm. Previously, I had tried LegatoNowPlaying, but unfortunately, it only supported Misskey, which I strongly disagreed with at the time because there was no Bluesky option.
        </p>
        <figure>
            <img src="/blogs/assets/misskey-id-buat-bot-post.png">
        </figure>
        <p>
            Unfortunately, it turns out that the developer <a href="https://github.com/Legato-Dev/Legato-NowPlaying" target="_blank">LegatoNowPlaying</a> only provides support for one player, namely <a href="https://aimp.ru" target="_blank">AIMP</a> and in the end I couldn‚Äôt use it for <a href="https://open.spotify.com" target="_blank">Spotify</a> and etc.
        </p>
        <p>
            Finally, it occurred to me about my account at <a href="https://bsky.app/profile/scrobble.naturbrilian.dpdns.org" target="_blank">@scrobble.naturbrilian.dpdns.org</a> which I created a few months ago. I actually separated this account from my main account, and it only contains playback statuses.
        </p>
        <h2>
            How do I instruct ChatGPT to create a simple tool?
        </h2>
        <p>
            The way to give commands to chatGPT is very easy. First, I give commands like this, just as if you were chatting with a friend.
        </p>
        <div class="code-display-wrapper">
            <pre>
                <code class="language-script">
I have an account on Bluesky with this username: https://bsky.app/profile/namapengguna.bsky.social. I plan to use this account to post what I'm listening to using the Last.fm API. I've tried tools like LegatoNowPlaying from GitHub, but it only works on Misskey. Do you know of any tools or scripts that currently work?
                </code>
            </pre>
            <button class="copy" type="button" aria-label="Copy code to clipboard">
                <i class="fa-solid fa-clipboard">
                    ::before
                </i>
            </button>
        </div>
        <p>
            Wait for chatGPT to respond. Usually, chatGPT will respond with recommendations for several tools that you are referring to, but sometimes the answers you receive may not be appropriate. So, try having another conversation as usual, like this I want to automatically post what I‚Äôm listening to, not post top artists every week. Or more simply, ‚Äúnot a top artist.‚Äù Then ChatGPT will respond with ‚Äúhow to create an autopost Now Playing to Bluesky.‚Äù The bot will then create a simple Python script. Just follow the instructions, and the bot will create the full version at the same time.
        </p>
        <h2>
            Setting up your lastfm API
        </h2>
        <p>
            Get your lastfm API from this links, then click create, several APIs will appear, then copy the API Key there.<br>
            http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=USERNAME&api_key=APIKEY&format=json&limit=1 Then, copy the code provided by ChatGPT into your favorite text editor. Here, I am using VSCode.
        </p>
        <figure>
            <img src="/blogs/assets/python-script-on-vscode.png">
        </figure>
        <p>
            Then enter the username and API key you received earlier, then go to Bluesky to get the password.
        </p>
        <blockquote>
            <h5 id="note">NOTE</h5>
            <P>
                The password on Bluesky is not an account password, but an application password.
            </P>
        </blockquote>
        <H2>
            How do you get your app password?
        </H2>
        <figure>
            <img src="/blogs/assets/apps-password.png">
        </figure>
        <p>
            Go to Settings > Privacy & Security > App Password, then click App Password, create any name you like, then click Next. The app password will then appear.<br>
        </p>
        <p>
            After that, enter the Bluesky Application Password in the section <strong>BSKY_PASS.</strong>
        </p>
        <blockquote>
            <h5 id="reminder">REMINDER</h5>
            <p>
                Labeled <strong>BSKY_HANDLE</strong> & <strong>BSKY_PASS</strong> filled as above
            </p>
        </blockquote>
        <p>
            Once everything is set up, try testing it by running the Python script in your directory. If an error appears, try troubleshooting it yourself if you are familiar with programming. If not, send the log displayed in CMD back to ChatGPT.<br>
        </p>
        <p>
            After all problem have been resolved, let‚Äôs test whether the script is running properly and play a song using a music player that supports Last.fm scrobble, web scrobble, or Spotify. If successful, the log should appear as follows
        </p>
        <figure>
            <img src="/blogs/assets/contoh-post-otomatis.png">
        </figure>
        <figure>
            <img src="/blogs/assets/hasil-di-bsky.png">
        </figure>
        <p>
            How about it? Would you like to try it, or shall I put the modified script below if you want to refine it?
        </p>
        <div class="code-display-wrapper">
            <pre>
                <code class="language-script">
import requests, time, datetime

LASTFM_USER = "USERNAMEKAMU"
LASTFM_API_KEY = "APIKEYKAMU"
BSKY_HANDLE = "username.bsky.social"
BSKY_PASS = "APPSPASSWORDKAMU"

last_track = None

while True:
    r = requests.get("http://ws.audioscrobbler.com/2.0/", params={
        "method": "user.getrecenttracks",
        "user": "USERNAMEKAMU",
        "api_key": "APIKEYKAMU",
        "format": "json",
        "limit": 1
    }).json()

    track = r["recenttracks"]["track"][0]
    if "@attr" in track and track["@attr"].get("nowplaying") == "true":
        artist = track["artist"]["#text"]
        title = track["name"]
        text = f"üéµ Now Playing: {artist} ‚Äì {title}"

        if text != last_track: 
            # login Bluesky
            session = requests.post("https://bsky.social/xrpc/com.atproto.server.createSession",
                json={"identifier": "username.bsky.social", "password": "APPSPASSWORDKAMU"}).json()
            headers = {
                "Authorization": f"Bearer {session['accessJwt']}",
                "Content-Type": "application/json"
            }

            post = {
                "repo": "DID AKUN KAMU",
                "collection": "app.bsky.feed.post",
                "record": {
                    "text": text,
                    "createdAt": datetime.datetime.utcnow().isoformat() + "Z"
                }
            }

            requests.post("https://bsky.social/xrpc/com.atproto.repo.createRecord",
                          headers=headers, json=post)
            print("Posted:", text)
            last_track = text

    time.sleep(30)
                </code>
            </pre>
            <button class="copy" type="button" aria-label="Copy code to clipboard">
                <i class="fa-solid fa-clipboard">
                    ::before
                </i>
            </button>
        </div>
        <a href="/blogs.html" class="button">&larr; Back</a>
    </main>

<style>
	body {
		font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	}
</style>

    <footer>
        <p>
        	¬© 2020 - 2025 Lieba Natur Brilian | <a href="changelog.html">changelog</a> | <a href="https://naturbrilian.atabook.org/" target="_blank">Guestbook</a><br>
        	This website uses theme colors from <a href="https://catppuccin.com/" target="_blank">Catpuccin</a> | Hosted on Github and Cloudflare Pages<br>
        	Feedback about this website can be sent via <a href="mailto:gingalibadeidara@gmail.com">gingalibadeidara@gmail.com</a>
        </p>
        <a href="https://nekoweb.org/" target="_blank"><img src="https://nekoweb.org/assets/buttons/button1.gif"></a><!-- button by neconotneko.nekoweb.org --> 

    </footer>
